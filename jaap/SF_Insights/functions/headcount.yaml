action_groups:
  - actions:
      - type: api-request
        method: GET
        system_alias: SAC
        path: https://BTP-SAC-service.cfapps.eu12.hana.ondemand.com/api/headcount
        result_variable: list 
      - type: message
        message:
          type: card
          content:
            title: Insights
            subtitle: Head Count per Location
            imageUrl: 'sap-icon://ai'
            imageStyle: avatar
            description:
              value: <? list ?>
              markdown: true
      - type: message
        message:
            type: text
            content: "Displaying the Headcount Data Widget...."
      - type: message
        message:
          type: ui5integrationCard
          content:
            manifest:  {
                "_version": "1.14.0",
                "sap.app": {
                  "id": "card.explorer.location.headcount",
                  "type": "card",
                  "title": "Headcount by Location",
                  "subTitle": "Total Employees across Locations",
                  "applicationVersion": {
                    "version": "1.0.0"
                  }
                },
                "sap.ui": {
                  "technology": "UI5",
                  "icons": {
                    "icon": "sap-icon://employee"
                  }
                },
                "sap.card": {
                  "type": "Analytical",
                  "header": {
                    "type": "Numeric",
                    "data": {
                      "json": {
                      }
                    },
                    "title": "HeadCount Insights",
                    "subTitle": "Shows headcount per location",
                    "unitOfMeasurement": "",
                    "mainIndicator": {
                      "number": "{n}",
                      "unit": "{u}",
                      "trend": "{trend}",
                      "state": "{valueColor}"
                    },
                    "details": ""
                  },
                  "content": {
                    "chartType": "stacked_column",
                    "chartProperties": {
                      "legend": {
                        "visible": false
                      },
                      "plotArea": {
                        "dataLabel": {
                          "visible": false,
                          "showTotal": true
                        }
                      },
                      "title": {
                        "text": "Stacked column chart",
                        "alignment": "bottom"
                      }
                    },
                    "data": {
                      "request": {
                        "url": "https://BTP-SAC-service.cfapps.eu12.hana.ondemand.com/api/headcount"
                      },
                      "path": "/list"
                    },
                    "dimensions": [
                      {
                        "name": "Location",
                        "value": "{Location}"
                      }
                    ],
                    "measures": [
                      {
                        "name": "headcount",
                        "value": "{headcount}"
                      }
                    ],
                    "feeds": [
                      {
                        "type": "Dimension",
                        "uid": "categoryAxis",
                        "values": ["Location"]
                      },
                      {
                        "type": "Measure",
                        "uid": "valueAxis",
                        "values": ["headcount"]
                      }
                    ]
                  }
                }
              }

      - type: message
        message:
            type: text
            content: "Would you like to view the SAC story?"
  # - actions:           
  #     - type: message
  #       message:
  #         type: ui5integrationCard
  #         content:
  #           manifest: 
  #             {
  #               "sap.card": {
  #                 "header": {
  #                   "title": "View SAC Story",
  #                   "actions": [
  #                     {
  #                       "type": "Navigation",
  #                       "parameters": {
  #                         "url": "https://basic-trial-sac.cfapps.ap11.hana.ondemand.com/sap/fpa/ui/app.html#story2&/s2/B7410F85C3295C54BB8CB26C73A37D6C/?mode=present",
  #                         "target": "_blank
  #                         "
  #                       }
  #                     }
  #                   ]
  #                 }
  #               }
  #             }

  # - actions:
  #      - type: message
  #        message:
  #         type: buttons
  #         content:
  #           title: ""
  #           buttons:
  #           - type: postback
  #             title: Give Mitigation Steps 
  #             value: Can you give mitigation steps for low headcount
